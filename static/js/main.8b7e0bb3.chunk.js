(this.webpackJsonpcoursedo=this.webpackJsonpcoursedo||[]).push([[0],{127:function(e,t,n){},312:function(e,t,n){},313:function(e,t,n){},314:function(e,t,n){},315:function(e,t,n){"use strict";n.r(t);var a=n(3),r=n(15),i=n(228),c=n(196),s=n(197),o=n(137),l=n(234),u=n(229),d=n(322),j=n(323),h=n(96),m=n(0),p=n.n(m),b=n(51),O=Object(b.b)({forceRefresh:!0}),g="NORMAL",f="CHOICE",x=Object.freeze({STUDENT:0,TEACHER:1,ADMIN:2});var v=d.a.Text,y=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).closeModal=function(){n.instance.setState({isShow:!1})},a.handleOk=function(){n.instance.state.onPress(),n.instance.closeModal()},a.handleCancel=function(){n.instance.closeModal()},n.instance=Object(o.a)(a),a.state={isShow:!1,title:"",content:"",type:g,onPress:function(){}},a}return Object(s.a)(n,[{key:"render",value:function(){return Object(a.jsx)(j.a,{title:n.instance.state.title,visible:n.instance.state.isShow,centered:!0,onOk:n.instance.handleOk,onCancel:n.instance.handleCancel,footer:n.instance.state.type===g?[Object(a.jsx)(h.a,{type:"primary",onClick:n.instance.handleOk,size:"large",children:"OK"},"okButton")]:[Object(a.jsx)(h.a,{onClick:n.instance.handleCancel,size:"large",children:"H\u1ee7y"},"cancelButton"),Object(a.jsx)(h.a,{size:"large",type:"primary",onClick:n.instance.handleOk,children:"OK"},"okButton")],children:Object(a.jsx)(v,{children:n.instance.state.content})})}}]),n}(p.a.Component);y.instance=null,y.alertMessage=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Information",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"An unexpected error has occured. Try again later.",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:g,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(){};y.instance.setState({isShow:!0,title:e,content:t,type:n,onPress:a})};var S=n(195),w=n(49),E=n(214),C=n.n(E),P=n(321),k=n(180),T=n(216),B=n.n(T),A=n(327),I=n(39),N=n(235),D=n(319),R=n(154),_=n(320),F=n(41),M=n(217),U=n.n(M),L=n(164),Q=n(328);function V(e){var t="".concat("https://coursedo.herokuapp.com/api","/").concat(e.url),n=e.param,a=je.getState().Auth.token,r=a?{"Content-Type":"application/json",accept:"application/json","Access-Control-Allow-Origin":!0,"Accept-Language":"vi",Authorization:a}:{"Content-Type":"application/json",accept:"application/json","Access-Control-Allow-Origin":!0,"Accept-Language":"vi"};return Object(L.a)(U.a.request(Object(F.a)({url:t,timeout:15e3,headers:r,method:e.method||"POST",data:n},"GET"===e.method?{params:n,data:{}}:{data:n})).catch((function(e){return Promise.resolve(e.response)}))).pipe(Object(R.a)((function(e){return e})),Object(Q.a)((function(e){return function(e,t,n){JSON.stringify(t,null,"\x1b[32m"),JSON.stringify(n,null,"\x1b[32m")}(0,n,e)})))}var K=n(52),W=Object(K.a)("SIGNIN_REQUEST"),q=Object(K.a)("SIGNIN_REQUEST_SUCCESS"),z=Object(K.a)("SIGNIN_REQUEST_FAILED"),G=Object(K.a)("SIGNUP_REQUEST"),H=Object(K.a)("SIGNUP_REQUEST_SUCCESS"),J=Object(K.a)("SIGNUP_REQUEST_FAILED"),Z=Object(K.a)("RESET_PASSWORD_REQUEST"),X=Object(K.a)("RESET_PASSWORD_SUCCESS"),Y=Object(K.a)("RESET_PASSWORD_FAILED"),$=Object(K.a)("CREATE_PASSWORD_REQUEST"),ee=Object(K.a)("CREATE_PASSWORD_SUCCESS"),te=Object(K.a)("CREATE_PASSWORD_FAILED"),ne=Object(K.a)("SIGNOUT_REQUEST"),ae=Object(A.a)((function(e){return e.pipe(Object(N.a)(W.type),Object(D.a)((function(e){return V({method:"POST",url:"auth/login",param:e.payload}).pipe(Object(R.a)((function(e){var t;return 200===e.status&&(null===(t=e.data)||void 0===t?void 0:t.authenticated)?q.get(e.data):(y.alertMessage("Information","Email or password may not correct. Please try again."),z.get(e.data.message))})),Object(_.a)((function(e){return z.get(e)})))})))}),(function(e){return e.pipe(Object(N.a)(G.type),Object(D.a)((function(e){return V({method:"POST",url:"auth/signup",param:e.payload}).pipe(Object(R.a)((function(e){var t;return 201===e.status?(je.dispatch(Object(I.d)("/signin",{from:"/signup"})),y.alertMessage("Information","Sign up succeed. Please sign in to continue."),H.get(e.data)):(y.alertMessage("Information",null===(t=e.data)||void 0===t?void 0:t.message),J.get(e))})),Object(_.a)((function(e){return J.get(e)})))})))}),(function(e){return e.pipe(Object(N.a)(Z.type),Object(D.a)((function(e){return V({method:"POST",url:"auth/resetPassword",param:e.payload}).pipe(Object(R.a)((function(e){return 200===e.status?(y.alertMessage("Information",e.data.message,g,(function(){return je.dispatch(Object(I.d)("/"))})),X.get(e.data)):(y.alertMessage(),Y.get(e))})),Object(_.a)((function(e){return Y.get(e)})))})))}),(function(e){return e.pipe(Object(N.a)($.type),Object(D.a)((function(e){return V({method:"POST",url:"auth/createPassword",param:e.payload}).pipe(Object(R.a)((function(e){return 200===e.status?(y.alertMessage("Information",e.data.message,g,(function(){return je.dispatch(Object(I.d)("/signin"))})),ee.get(e.data)):(y.alertMessage(),te.get(e))})),Object(_.a)((function(e){return te.get(e)})))})))})),re=Object(A.a)(ae),ie=n(136),ce={token:null,refreshToken:null,user:null};var se=Object(w.c)({Auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ce,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case q.type:return Object(F.a)(Object(F.a)({},e),{},{token:t.payload.accessToken,refreshToken:t.payload.refreshToken,user:t.payload});case ne.type:return ce;default:return e}},router:Object(ie.a)(O)}),oe=Object(P.a)(),le=Object(w.a)(oe,Object(S.a)(O)),ue=(Object(w.a)(C.a,oe,Object(S.a)(O)),{key:"root",storage:B.a}),de=Object(k.a)(ue,se),je=Object(w.e)(de,Object(w.d)(le));oe.run(re);var he=Object(k.b)(je),me=n(14),pe=n.n(me),be=n(230),Oe=n(27),ge=n(219),fe=n(326);n(127);var xe=function(e){return Object(a.jsxs)("div",{style:{width:"100%",marginBottom:12},children:[Object(a.jsx)(fe.a,Object(F.a)({},e)),e.error&&Object(a.jsx)("span",{className:"errorStyle",children:e.error})]})},ve=n(65),ye=n(85),Se=n(13),we=n(38),Ee=n.p+"static/media/forgot_password.88496ed7.jpg",Ce=n.p+"static/media/logo.19a91f5e.png";var Pe=function(){var e=Object(Se.e)(),t=Object(Oe.d)(),n=Object(Oe.e)((function(e){var t;return null===(t=e.Auth)||void 0===t?void 0:t.user})),r=Object(ye.useMediaQuery)({minDeviceWidth:1224});Object(m.useEffect)((function(){n&&e.replace("/")}),[n]);var i=we.a().shape({email:we.c().trim().max(48,"Email must have at most 48 characters").label("Email").email("Invalid email").required("* Please input email")}),c=function(e){t(Z.get(Object(F.a)(Object(F.a)({},e),{},{email:e.email.toLowerCase()})))};return Object(a.jsxs)("div",{id:"bg",children:[Object(a.jsxs)("div",{id:"loginBg",children:[Object(a.jsx)("a",{href:"/",style:{textDecoration:"none",color:"white"},children:Object(a.jsx)("img",{src:Ce,alt:"forgot",width:100})}),Object(a.jsx)("div",{id:"loginBox",children:Object(a.jsx)(ve.b,{initialValues:{email:""},isInitialValid:!1,validationSchema:i,onSubmit:function(e){return c(e)},children:function(t){var n=t.handleChange,r=t.handleBlur,i=t.handleSubmit,s=t.values,o=t.isValid,l=t.errors,u=(t.touched,t.setFieldTouched);return Object(a.jsxs)(ve.a,{className:"formStyle",children:[Object(a.jsx)("span",{id:"loginStyle",children:"Ok let\u2019s fetch you ya\u2019 login details"}),Object(a.jsx)(xe,{className:"inputBox",value:s.email,onChange:n("email"),onTouchStart:function(){return u("email")},onBlur:r("email"),placeholder:"Email",onKeyPress:function(e){return function(e,t,n){e&&"Enter"===t.key&&c(n)}(o,e,s)},error:l.email}),Object(a.jsxs)("div",{style:{alignSelf:"flex-end",marginBottom:34},children:[Object(a.jsx)("span",{children:"Already have an account? "}),Object(a.jsx)(h.a,{style:{padding:0},color:"primary",type:"link",onClick:function(){return e.push({pathname:"/signin",state:{from:"/forgot"}})},children:"Back to Sign Up"})]}),Object(a.jsx)(h.a,{id:"loginBtn",disabled:!o,type:"primary",onClick:i,children:"Proceed"})]})}})})]}),r&&Object(a.jsx)("div",{id:"imgBg",style:{backgroundImage:"url(".concat(Ee,")")}})]})},ke=n(324),Te=n(325);n(312);var Be=function(e){var t=Object(Oe.e)((function(e){return e.Auth.user})),n=Object(Se.e)();return Object(a.jsxs)("div",{id:"headerView",children:[Object(a.jsx)("span",{id:"logoText",children:"coursedo"}),t?(null===t||void 0===t?void 0:t.avatar)?Object(a.jsx)(ke.a,{size:48,src:null===t||void 0===t?void 0:t.avatar}):Object(a.jsx)(ke.a,{size:48,icon:Object(a.jsx)(Te.a,{})}):Object(a.jsx)(h.a,{type:"primary",style:{borderRadius:50},onClick:function(){return n.push({pathname:"/signin",state:{from:"/"}})},children:"Sign in"})]})};var Ae=function(){var e=Object(Oe.d)();return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(Be,{}),Object(a.jsxs)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",flex:1,backgroundColor:"white"},children:[Object(a.jsx)(h.a,{onClick:function(){y.alertMessage("Information","Ha ha",f)},children:"M\u1edf modal"}),Object(a.jsx)(h.a,{type:"primary",onClick:function(){return O.push("/signup")},children:"\u0110\u0103ng k\xfd"}),Object(a.jsx)(h.a,{onClick:function(){return O.push("/signin")},children:"\u0110\u0103ng nh\u1eadp"}),Object(a.jsx)(h.a,{onClick:function(){return e(ne.get())},children:"Log out"})]})]})},Ie=n(109),Ne=n.p+"static/media/signin.07d692eb.png";var De=function(){var e=Object(Se.e)(),t=Object(Oe.d)(),n=Object(Oe.e)((function(e){var t;return null===(t=e.Auth)||void 0===t?void 0:t.user})),r=Object(ye.useMediaQuery)({minDeviceWidth:1224});Object(m.useEffect)((function(){n&&(e.location.state?e.goBack():e.replace("/"))}),[n]);var i=we.a().shape({password:we.c().required("* Please input password").min(8,"Password must include at least 8 characters").max(48,"Password must include at most 48 characters").matches(/(?=.{8,})/,{message:"Password must include at least 8 characters"}),email:we.c().trim().max(48,"Email must have at most 48 characters").label("Email").email("Invalid email").required("* Please input email")}),c=function(e){t(W.get(Object(F.a)(Object(F.a)({},e),{},{email:e.email.toLowerCase()})))},s=function(e,t,n){e&&"Enter"===t.key&&c(n)};return Object(a.jsxs)("div",{id:"bg",children:[Object(a.jsxs)("div",{id:"loginBg",children:[Object(a.jsx)("a",{href:"/",style:{textDecoration:"none",color:"white"},children:Object(a.jsx)("img",{src:Ce,alt:"signin",width:100})}),Object(a.jsx)("div",{id:"loginBox",children:Object(a.jsx)(ve.b,{initialValues:{password:"",email:""},isInitialValid:!1,validationSchema:i,onSubmit:function(e){return c(e)},children:function(t){var n=t.handleChange,r=t.handleBlur,i=t.handleSubmit,c=t.values,o=t.isValid,l=t.errors,u=(t.touched,t.setFieldTouched);return Object(a.jsxs)(ve.a,{className:"formStyle",children:[Object(a.jsx)("span",{id:"loginStyle",children:"Sign in to your account to continue"}),Object(a.jsx)(xe,{className:"inputBox",value:c.email,onChange:n("email"),onTouchStart:function(){return u("email")},onBlur:r("email"),placeholder:"Email",onKeyPress:function(e){return s(o,e,c)},error:l.email}),Object(a.jsx)(xe,Object(Ie.a)({className:"inputBox",type:"password",onChange:n("password"),onTouchStart:function(){return u("password")},value:c.password,onBlur:r("password"),placeholder:"Password",onKeyPress:function(e){return s(o,e,c)},error:l.password},"type","password")),Object(a.jsxs)("div",{className:"buttomBox",children:[Object(a.jsx)(h.a,{style:{padding:0},color:"primary",type:"link",onClick:function(){return e.push("/forgot")},children:"Forgot password?"}),Object(a.jsxs)("div",{children:[Object(a.jsx)("span",{children:"Don\u2019t have an account? "}),Object(a.jsx)(h.a,{style:{padding:0},color:"primary",type:"link",onClick:function(){return e.push("/signup")},children:"Sign up"})]})]}),Object(a.jsx)(h.a,{id:"loginBtn",disabled:!o,type:"primary",onClick:i,children:"Sign in"})]})}})})]}),r&&Object(a.jsx)("div",{id:"imgBg",style:{backgroundImage:"url(".concat(Ne,")")}})]})},Re=n.p+"static/media/signup.46c9af80.png";var _e=function(){var e=Object(Se.e)(),t=Object(Oe.d)(),n=Object(Oe.e)((function(e){var t;return null===(t=e.Auth)||void 0===t?void 0:t.user})),r=Object(ye.useMediaQuery)({minDeviceWidth:1224});Object(m.useEffect)((function(){n&&e.replace("/")}),[n]);var i=we.a().shape({email:we.c().trim().max(48,"Email must have at most 48 characters").label("Email").email("Invalid email").required("* Please input email"),password:we.c().required("* Please input password").min(8,"Password must include at least 8 characters").max(48,"Password must include at most 48 characters").matches(/(?=.{8,})/,{message:"Password must include at least 8 characters"}),fullName:we.c().trim().required("* Please input password").min(3,"Full name must include at least 3 characters").max(64,"Full name must include at most 48 characters").matches(/(?:(?![0-9A-Z_a-z\xC0-\xC3\xC8-\xCA\xCC\xCD\xD2-\xD5\xD9\xDA\xDD\xE0-\xE3\xE8-\xEA\xEC\xED\xF2-\xF5\xF9\xFA\u0102\u0103\u0110\u0111\u0128\u0129\u0168\u0169\u01A0\u01A1\u01AF\u01B0\u1EA0-\u1EBD\u1EC0-\u1EF9])[\s\S])/,{message:"Invalid full name"})}),c=function(e){t(G.get(Object(F.a)(Object(F.a)({},e),{},{email:e.email.toLowerCase(),role:x.STUDENT})))},s=function(e,t,n){e&&"Enter"===t.key&&c(n)};return Object(a.jsxs)("div",{id:"bg",children:[Object(a.jsxs)("div",{id:"loginBg",children:[Object(a.jsx)("a",{href:"/",style:{textDecoration:"none",color:"white"},children:Object(a.jsx)("img",{src:Ce,alt:"signup",width:100})}),Object(a.jsx)("div",{id:"loginBox",children:Object(a.jsx)(ve.b,{initialValues:{email:"",password:"",fullName:""},isInitialValid:!1,validationSchema:i,onSubmit:function(e){return c(e)},children:function(t){var n=t.handleChange,r=t.handleBlur,i=t.handleSubmit,c=t.values,o=t.isValid,l=t.errors,u=(t.touched,t.setFieldTouched);return Object(a.jsxs)(ve.a,{className:"formStyle",children:[Object(a.jsx)("span",{id:"loginStyle",children:"Please create a new account here"}),Object(a.jsx)(xe,{className:"inputBox",value:c.fullName,onChange:n("fullName"),onTouchStart:function(){return u("fullName")},onBlur:r("fullName"),placeholder:"Full name",onKeyPress:function(e){return s(o,e,c)},error:l.fullName}),Object(a.jsx)(xe,{className:"inputBox",value:c.email,onChange:n("email"),onTouchStart:function(){return u("email")},onBlur:r("email"),placeholder:"Email",onKeyPress:function(e){return s(o,e,c)},error:l.email}),Object(a.jsx)(xe,Object(Ie.a)({className:"inputBox",type:"password",onChange:n("password"),onTouchStart:function(){return u("password")},value:c.password,onBlur:r("password"),placeholder:"Password",onKeyPress:function(e){return s(o,e,c)},error:l.password},"type","password")),Object(a.jsxs)("div",{style:{alignSelf:"flex-end",marginBottom:34},children:[Object(a.jsx)("span",{children:"Already have an account? "}),Object(a.jsx)(h.a,{style:{padding:0},color:"primary",type:"link",onClick:function(){return e.push({pathname:"/signin",state:{from:"/signup"}})},children:"Sign in"})]}),Object(a.jsx)(h.a,{id:"loginBtn",disabled:!o,type:"primary",onClick:i,children:"Sign up"})]})}})})]}),r&&Object(a.jsx)("div",{id:"imgBg",style:{backgroundImage:"url(".concat(Re,")")}})]})};var Fe=function(){var e=Object(Se.f)().token,t=Object(Se.e)(),n=Object(Oe.d)(),r=Object(Oe.e)((function(e){var t;return null===(t=e.Auth)||void 0===t?void 0:t.user})),i=Object(ye.useMediaQuery)({minDeviceWidth:1224});Object(m.useEffect)((function(){!r&&e||t.replace("/")}),[r]);var c=we.a().shape({password:we.c().required("* Please input password").min(8,"Password must include at least 8 characters").max(48,"Password must include at most 48 characters").matches(/(?=.{8,})/,{message:"Password must include at least 8 characters"}),confirm:we.c().required("* Please input password").min(8,"Password must include at least 8 characters").max(48,"Password must include at most 48 characters").matches(/(?=.{8,})/,{message:"Password must include at least 8 characters"}).oneOf([we.b("password"),null],"Confirm password must be the same as password")}),s=function(t){n($.get({password:t.password,token:e}))},o=function(e,t,n){e&&"Enter"===t.key&&s(n)};return Object(a.jsxs)("div",{id:"bg",children:[Object(a.jsxs)("div",{id:"loginBg",children:[Object(a.jsx)("a",{href:"/",style:{textDecoration:"none",color:"white"},children:Object(a.jsx)("img",{src:Ce,alt:"logo",width:100})}),Object(a.jsx)("div",{id:"loginBox",children:Object(a.jsx)(ve.b,{initialValues:{password:"",confirm:""},isInitialValid:!1,validationSchema:c,onSubmit:function(e){return s(e)},children:function(e){var t=e.handleChange,n=e.handleBlur,r=e.handleSubmit,i=e.values,c=e.isValid,s=e.errors,l=(e.touched,e.setFieldTouched);return Object(a.jsxs)(ve.a,{className:"formStyle",children:[Object(a.jsx)("span",{id:"loginStyle",children:"Input new password to continue"}),Object(a.jsx)(xe,{className:"inputBox",value:i.password,onChange:t("password"),onTouchStart:function(){return l("password")},onBlur:n("password"),placeholder:"New password",onKeyPress:function(e){return o(c,e,i)},error:s.password,type:"password"}),Object(a.jsx)(xe,{className:"inputBox",value:i.confirm,onChange:t("confirm"),onTouchStart:function(){return l("confirm")},onBlur:n("confirm"),placeholder:"Confirm password",onKeyPress:function(e){return o(c,e,i)},error:s.confirm,type:"password"}),Object(a.jsx)(h.a,{style:{marginTop:24},id:"loginBtn",disabled:!c,type:"primary",onClick:r,children:"Reset password"})]})}})})]}),i&&Object(a.jsx)("div",{id:"imgBg",style:{backgroundImage:"url(".concat(Ee,")")}})]})},Me=n(94);n(313);var Ue=function(){return Object(a.jsxs)(Me.a,{history:O,children:[Object(a.jsx)(Se.a,{exact:!0,path:"/",component:Ae}),Object(a.jsx)(Se.a,{path:"/signin",component:De}),Object(a.jsx)(Se.a,{path:"/signup",component:_e}),Object(a.jsx)(Se.a,{path:"/forgot",component:Pe}),Object(a.jsx)(Se.a,{path:"/reset/:token",component:Fe})]})},Le=(n(314),function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,329)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,i=t.getLCP,c=t.getTTFB;n(e),a(e),r(e),i(e),c(e)}))});pe.a.render(Object(a.jsx)(p.a.StrictMode,{children:Object(a.jsxs)(Oe.a,{store:je,children:[Object(a.jsx)(r.b,{locale:i.a,children:Object(a.jsx)(ge.a,{loading:null,persistor:he,children:Object(a.jsxs)(be.a.Provider,{value:{className:"react-icon-clasname",style:{verticalAlign:"middle"}},children:[Object(a.jsx)(Ue,{}),Object(a.jsx)(y,{})]})})}),">"]})}),document.getElementById("root")),Le()}},[[315,1,2]]]);
//# sourceMappingURL=main.8b7e0bb3.chunk.js.map